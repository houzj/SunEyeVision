┌─────────────────────────────────────────────────────────────────────────────────────┐
│                              插件开发指南                                             │
├─────────────────────────────────────────────────────────────────────────────────────┤
│                                                                                     │
│   开发新工具插件的步骤:                                                             │
│                                                                                     │
│   Step 1: 创建项目                                                                  │
│   ────────────────────────────────────────────────────────────────────────────────  │
│   • 在 tools/ 目录下创建新项目 SunEyeVision.Tool.YourTool                          │
│   • 目标框架: net9.0-windows                                                       │
│   • 启用 WPF: <UseWPF>true</UseWPF>                                                │
│   • 输出目录: $(SolutionDir)src\UI\bin\$(Configuration)\$(TargetFramework)\plugins\ │
│   • 项目引用: 只引用 Plugin.Abstractions                                           │
│                                                                                     │
│   Step 2: 实现核心接口                                                             │
│   ────────────────────────────────────────────────────────────────────────────────  │
│   ┌─────────────────────────────────────────────────────────────────────────────┐  │
│   │ public class YourToolPlugin : IToolPlugin                                   │  │
│   │ {                                                                           │  │
│   │     public ToolMetadata Metadata => new ToolMetadata                        │  │
│   │     {                                                                       │  │
│   │         Name = "YourTool",                                                  │  │
│   │         Category = "Category",                                              │  │
│   │         Description = "Description"                                         │  │
│   │     };                                                                      │  │
│   │                                                                             │  │
│   │     public ViewModelBase CreateViewModel() => new YourToolViewModel();      │  │
│   │     public FrameworkElement CreateView() => new YourToolView();             │  │
│   │     public IImageProcessor CreateProcessor() => new YourProcessor();        │  │
│   │ }                                                                           │  │
│   └─────────────────────────────────────────────────────────────────────────────┘  │
│                                                                                     │
│   Step 3: 实现视图模型                                                             │
│   ────────────────────────────────────────────────────────────────────────────────  │
│   ┌─────────────────────────────────────────────────────────────────────────────┐  │
│   │ public class YourToolViewModel : ToolDebugViewModelBase                     │  │
│   │ {                                                                           │  │
│   │     private Mat _inputImage;                                                │  │
│   │     public Mat InputImage                                                   │  │
│   │     {                                                                       │  │
│   │         get => _inputImage;                                                 │  │
│   │         set { _inputImage = value; OnPropertyChanged(); }                    │  │
│   │     }                                                                       │  │
│   │                                                                             │  │
│   │     public override AlgorithmResult Execute()                               │  │
│   │     {                                                                       │  │
│   │         // 实现处理逻辑                                                      │  │
│   │         return new AlgorithmResult { Success = true };                      │  │
│   │     }                                                                       │  │
│   │ }                                                                           │  │
│   └─────────────────────────────────────────────────────────────────────────────┘  │
│                                                                                     │
│   Step 4: 创建视图 (可选)                                                          │
│   ────────────────────────────────────────────────────────────────────────────────  │
│   • 创建 Views/YourToolView.xaml                                                   │
│   • 使用数据绑定连接 ViewModel                                                     │
│                                                                                     │
│   Step 5: 编译测试                                                                 │
│   ────────────────────────────────────────────────────────────────────────────────  │
│   • 编译项目，输出到 plugins/ 目录                                                 │
│   • 运行主程序，验证工具出现在工具箱                                               │
│   • 测试工具功能是否正常                                                           │
│                                                                                     │
└─────────────────────────────────────────────────────────────────────────────────────┘
