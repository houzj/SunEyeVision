┌─────────────────────────────────────────────────────────────────────────┐
│                        专业图片预览器架构                                 │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│  ┌─────────────────────────────────────────────────────────────────┐   │
│  │                     UI 虚拟化层                        │   │
│  │  ┌───────────┐  ┌───────────┐  ┌───────────┐                    │   │
│  │  │ 可视区域   │  │ 缓冲区域   │  │ 回收池     │                    │   │
│  │  │ (实例化)   │  │ (预实例化) │  │ (容器复用) │                    │   │
│  │  └───────────┘  └───────────┘  └───────────┘                    │   │
│  └─────────────────────────────────────────────────────────────────┘   │
│                              ↓                                          │
│  ┌─────────────────────────────────────────────────────────────────┐   │
│  │                     缩略图加载层                       │   │
│  │  ┌────────────────────────────────────────────────────────┐     │   │
│  │  │ 优先级队列: P0(可视) → P1(预加载) → P2(后台) → P3(空闲) │     │   │
│  │  └────────────────────────────────────────────────────────┘      │   │
│  └─────────────────────────────────────────────────────────────────┘   │
│                              ↓                                          │
│  ┌─────────────────────────────────────────────────────────────────┐   │
│  │                     多级缓存层 (Cache)                           │   │
│  │  ┌──────────┐  ┌──────────┐  ┌──────────┐  ┌──────────┐        │   │
│  │  │ L1 强引用 │→│ L2 弱引用 │→│ L3 磁盘   │→│ L4 原图   │        │   │
│  │  │ (可视区) │  │ (缓冲区) │  │ (持久化) │  │ (按需加载)│        │   │
│  │  └──────────┘  └──────────┘  └──────────┘  └──────────┘        │   │
│  └─────────────────────────────────────────────────────────────────┘   │
│                              ↓                                          │
│  ┌─────────────────────────────────────────────────────────────────┐   │
│  │                     内存管理层 (Memory)                          │   │
│  │  ┌────────────────────────────────────────────────────────┐     │   │
│  │  │  压力监控 → 智能降级 → 渐进清理 → 状态同步               │     │   │
│  │  └────────────────────────────────────────────────────────┘     │   │
│  └─────────────────────────────────────────────────────────────────┘   │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
